syntax = "proto3";
package finschia.or.da.v1;

import "gogoproto/gogo.proto";
import "cosmos_proto/cosmos.proto";
import "finschia/or/da/v1/params.proto";
import "finschia/or/da/v1/da.proto";

option go_package = "github.com/Finschia/finschia-sdk/x/or/da/types";

// Msg defines the Msg service.
service Msg {
  rpc UpdateParams(MsgUpdateParams) returns (MsgUpdateParamsResponse);

  // Allow the sequencer to append a batch of transactions.
  rpc AppendCCBatch(MsgAppendCCBatch) returns (MsgAppendCCBatchResponse);

  // Add a L2 transaction to the queue to process forcibly.
  rpc Enqueue(MsgEnqueue) returns (MsgEnqueueResponse);

  // Allow the proposer to append a state batch
  rpc AppendSCCBatch(MsgAppendSCCBatch) returns (MsgAppendSCCBatchResponse);

  // Removes a batch and all subsequent batches from SCC.
  rpc RemoveSCCBatch(MsgAppendSCCBatch) returns (MsgAppendSCCBatchResponse);
}

message MsgUpdateParams {

  // authority is the address that controls the module (defaults to x/gov unless overwritten).
  string authority = 1;

  // params defines the x/or/da parameters to update.
  //
  // NOTE: All parameters must be supplied.
  Params params = 2 [(gogoproto.nullable) = false];
}

message MsgUpdateParamsResponse {}

message MsgAppendCCBatch {
  // this address must be the sequencer address which is registered in L1.
  string from_address = 1;
  string rollup_name = 2;
  CCBatch batch = 3 [(gogoproto.nullable) = false];
}

message MsgAppendCCBatchResponse {}

message MsgEnqueue {
  string from_address = 1;
  string rollup_name = 2;
  uint64 gas_limit = 3;
  bytes txraw = 4;
}

message MsgEnqueueResponse {}

message MsgAppendSCCBatch {
  string from_address = 1;
  string rollup_name = 2;
  SCCBatch batch = 3 [(gogoproto.nullable) = false];
}

message MsgAppendSCCBatchResponse {}

message MsgRemoveSCCBatch {
  // authority must be settlement module address.
  string authority = 1;
  string rollup_name = 2;
  uint64 batch_index = 3;
}

message MsgRemoveSCCBatchResponse {}
